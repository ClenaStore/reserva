<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Reserva - Mercatto</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0f19;--card:#151d2f;--text:#fff;--accent:#b8860b;--muted:#94a3b8;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif;text-transform:uppercase;}
body{background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1rem;}
form{
  background:var(--card);
  padding:1.5rem;
  border-radius:1rem;
  width:100%;
  max-width:400px;
  box-shadow:0 0 10px #0003;
}
h2{text-align:center;margin-bottom:1rem;color:var(--accent);}
label{display:block;margin-top:1rem;font-weight:600;color:var(--muted);font-size:.85rem;}
input,select,textarea{
  width:100%;
  padding:.75rem;
  border:none;
  border-radius:.5rem;
  margin-top:.3rem;
  background:#1e293b;
  color:var(--text);
  font-size:.9rem;
}
button{
  margin-top:1.5rem;
  width:100%;
  padding:.9rem;
  background:var(--accent);
  border:none;
  border-radius:.5rem;
  color:#fff;
  font-weight:600;
  font-size:1rem;
  cursor:pointer;
}
button:active{opacity:.8;}
small{
  display:block;
  text-align:center;
  color:var(--muted);
  margin-top:1rem;
  font-size:.8rem;
  line-height:1.3;
}
</style>
</head>
<body>
<form id="formReserva">
  <h2>RESERVA MERCATTO</h2>

  <label>NOME</label>
  <input type="text" name="nome" required>

  <label>DATA</label>
  <input type="date" name="data" required>

  <label>HORÁRIO</label>
  <input type="time" name="horario" required>

  <label>MESA</label>
  <input type="text" name="mesa">

  <label>Nº DE PESSOAS</label>
  <input type="text" name="pessoas" required>

  <label>CONTATO</label>
  <input type="tel" name="contato" id="telefone" placeholder="(00) 00000-0000" required>

  <label>OCASIÃO</label>
  <input type="text" name="ocasiao" placeholder="Aniversário, reunião...">

  <label>DECORAÇÃO</label>
  <input type="text" name="decoracao">

  <label>COMANDAS INDIVIDUAIS</label>
  <select name="comandas">
    <option value="SIM">SIM</option>
    <option value="NÃO">NÃO</option>
  </select>

  <button type="submit">ENVIAR RESERVA</button>

  <small>Bem-vindo ao formulário de reservas.  
  Lembrando que cobramos couvert artístico de quarta a sábado e taxa de 10% em todas as reservas.  
  Após o envio, aguarde nossa confirmação. Obrigado pela preferência!</small>
</form>

<script>
// Máscara telefone
document.getElementById('telefone').addEventListener('input', function(e) {
  let x = e.target.value.replace(/\D/g, '').substring(0, 11);
  let ddd = x.substring(0, 2);
  let p1 = x.substring(2, 7);
  let p2 = x.substring(7, 11);
  if (x.length > 7) e.target.value = `(${ddd}) ${p1}-${p2}`;
  else if (x.length > 2) e.target.value = `(${ddd}) ${p1}`;
  else if (x.length > 0) e.target.value = `(${ddd}`;
});

// Envio ao Google Apps Script
document.getElementById('formReserva').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const form = e.target;
  const data = Object.fromEntries(new FormData(form).entries());

  try{
    const resposta = await fetch("https://script.google.com/macros/s/AKfycbzrb2raIJw_n4CBooUtm0QMoA7v19aFlZjZuKGnL1wfMSjNDgT97RQTDH2LMd35A-NY2Q/exec", {
      method:"POST",
      body:JSON.stringify(data),
      headers:{"Content-Type":"application/json"}
    });
    if(resposta.ok){
      alert("✅ Reserva enviada com sucesso! Aguarde nossa confirmação.");
      form.reset();
    }else alert("❌ Erro ao enviar. Tente novamente.");
  }catch(err){
    alert("Erro de conexão. Verifique sua internet.");
  }
});
</script>
</body>
</html>
