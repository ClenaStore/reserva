<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Reserva de Mesa • Delícia Gourmet</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0f19;--card:#161d2f;--text:#fff;--gold:#c9a227;
  --muted:#9ca3af;--ok:#22c55e;--radius:14px;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif;}
body{
  background:var(--bg);color:var(--text);
  display:flex;align-items:center;justify-content:center;
  min-height:100vh;padding:1rem;
}
form{
  width:100%;max-width:420px;background:var(--card);
  padding:2rem 1.5rem;border-radius:var(--radius);
  box-shadow:0 4px 20px #0005;position:relative;
}
h2{text-align:center;margin-bottom:1.5rem;color:var(--gold);font-weight:600;}
label{display:block;margin:0.6rem 0 0.25rem;color:var(--muted);font-size:0.9rem;}
input,select{
  width:100%;padding:0.8rem;border:none;border-radius:var(--radius);
  background:#1e2639;color:var(--text);font-size:1rem;margin-bottom:0.8rem;
}
button{
  width:100%;padding:0.9rem;border:none;border-radius:var(--radius);
  background:var(--gold);color:#000;font-weight:600;
  letter-spacing:1px;cursor:pointer;transition:.2s;
}
button:hover{background:#ffd54a;}
p.info{text-align:center;margin-top:1rem;color:var(--muted);font-size:0.8rem;}

.overlay{
  display:none;position:absolute;inset:0;backdrop-filter:blur(4px);
  background:#0008;align-items:center;justify-content:center;border-radius:var(--radius);
}
.overlay.active{display:flex;}
.overlay span{
  color:var(--gold);font-weight:600;font-size:1.1rem;
  animation:pulse 1s infinite;
}
@keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}
.success,.error{
  position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
  background:#1e2639;padding:1rem 2rem;border-radius:var(--radius);
  font-weight:600;display:none;
}
.success{color:var(--ok);border:1px solid var(--ok);}
.error{color:#ef4444;border:1px solid #ef4444;}
</style>
</head>

<body>
<form id="formReserva">
  <h2>FAÇA SUA RESERVA</h2>

  <label>Nome Completo</label>
  <input type="text" name="nome" required>

  <label>Celular</label>
  <input type="tel" name="celular" placeholder="(00) 00000-0000" required>

  <label>Data da Reserva</label>
  <input type="date" name="data" required>

  <label>Horário</label>
  <input type="time" name="hora" required>

  <label>Número da Mesa</label>
  <input type="number" name="mesa" min="1" required>

  <label>Quantidade de Pessoas</label>
  <input type="number" name="quantidade" min="1" required>

  <label>Ocasião</label>
  <input type="text" name="ocasiao">

  <label>Decoração</label>
  <input type="text" name="decoracao">

  <label>Comanda Individual</label>
  <select name="comanda" required>
    <option value="">Selecione</option>
    <option value="SIM">SIM</option>
    <option value="NÃO">NÃO</option>
  </select>

  <button type="submit">ENVIAR RESERVA</button>
  <p class="info">COBRAMOS COUVERT ARTÍSTICO DE QUARTA A SÁBADO<br>E TAXA DE 10%</p>

  <div class="overlay" id="overlay"><span>ENVIANDO...</span></div>
</form>

<div class="success" id="msgSucesso">✅ Reserva enviada com sucesso!</div>
<div class="error" id="msgErro">❌ Falha na conexão. Tente novamente.</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwuc_PQIwmfMtKc7QhGbilDKDPJWB3OYQb_a00njzKKmOs_frWeV3a5306VpKVjJl6P/exec";
const form = document.getElementById('formReserva');
const overlay = document.getElementById('overlay');
const msgSucesso = document.getElementById('msgSucesso');
const msgErro = document.getElementById('msgErro');

form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  overlay.classList.add('active');

  const dados = Object.fromEntries(new FormData(form));
  dados.acao = "registrarReserva";

  try {
    const response = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(dados)
    });

    const res = await response.json();
    overlay.classList.remove('active');

    if (res.sucesso) {
      msgSucesso.style.display = "block";
      form.reset();
      setTimeout(()=>msgSucesso.style.display="none",3000);
    } else {
      msgErro.innerText = "⚠️ " + res.mensagem;
      msgErro.style.display = "block";
      setTimeout(()=>msgErro.style.display="none",4000);
    }

  } catch(err){
    overlay.classList.remove('active');
    msgErro.innerText = "❌ Falha na conexão com o servidor.";
    msgErro.style.display = "block";
    setTimeout(()=>msgErro.style.display="none",4000);
  }
});
</script>
</body>
</html>
